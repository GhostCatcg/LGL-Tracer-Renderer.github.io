import{L as h,l as C,O as w,R as L,a as M,u as E,e as S,g as b,D as P}from"./stats.module.949be9f2.js";import{A as D,S as v,P as I,C as y}from"./vendor.fd21b549.js";import{m as F}from"./makeCommonGUI.6021a0e2.js";const T=[],G=S.Konzerthaus,z=b.DragonDraco,e=new h;e.bounces=5;e.renderWhenOffFocus=!0;e.toneMapping=D;e.envMapIntensity=2;e.enableDenoise=!0;e.enableTemporalDenoise=!1;document.body.appendChild(e.domElement);const i=new v;C(T,i);const a=new I(45,window.innerWidth/window.innerHeight,.001,1e3),l=new w(a,e.domElement);l.screenSpacePanning=!0;const o=document.querySelector("#container");function A(n){n?o.classList.contains("isLoading")||o.classList.add("isLoading"):o.classList.contains("isLoading")&&o.classList.remove("isLoading")}const c=!0,{initStats:R,initGUI:j,initCameraDebugInfo:k}=F();e.loadingCallback={onProgress:n=>{console.log(n)},onComplete:n=>{console.log(n),A(!1),x(),j(c,e)}};const m=R(c),d=k(c);let g=null,s=null;function x(){e.setDenoiseColorFactor(3),e.setDenoisePositionFactor(.3)}function O(n){n.traverse(t=>{t.isMesh&&t.material&&t.material.isMeshStandardMaterial&&(t.material=new P().fromStandardMaterial(t.material),t.material.transmission=1,t.material.roughness=.316,t.material.extinction=new y(15114316))})}async function U(){const n=new L,t=await new Promise(p=>{n.load(G,p)});i.environment=t;const r=(await M(z)).scene;O(r),r.rotation.y=Math.PI/1.5,i.add(r),E(a,l,i),a.position.z-=5,e.buildScene(i,a).then(()=>{u()})}function f(){if(e.domElement.parentElement){const n=e.domElement.parentElement.clientWidth,t=e.domElement.parentElement.clientHeight;e.setSize(n,t),a.aspect=n/t,a.updateProjectionMatrix()}}window.addEventListener("resize",f);f();function u(n){l.update(),m.begin(),e.render(i,a),m.end(),d&&(s=e.getTotalSamples(),g!=s&&(d.innerText=`Samples: ${s}`,g=s)),requestAnimationFrame(u)}U();

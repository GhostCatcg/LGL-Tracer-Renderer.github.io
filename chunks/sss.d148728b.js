import{L as h,l as L,O as S,R as w,d as C,u as M,e as E,g as P,D as b}from"./stats.module.9a08a616.js";import{A as v,S as D,P as I}from"./vendor.4a9eae3d.js";import{m as F}from"./makeCommonGUI.8426dbd5.js";const y=[],G=E.Dirlight,T=P.SSSDragon,e=new h;e.bounces=5;e.renderWhenOffFocus=!1;e.toneMapping=v;e.envMapIntensity=1;e.enableDenoise=!1;document.body.appendChild(e.domElement);const a=new D;L(y,a);const i=new I(45,window.innerWidth/window.innerHeight,.001,1e3),r=new S(i,e.domElement);r.screenSpacePanning=!0;const o=document.querySelector("#container");function R(n){n?o.classList.contains("isLoading")||o.classList.add("isLoading"):o.classList.contains("isLoading")&&o.classList.remove("isLoading")}const l=!0,{initStats:j,initGUI:k,initCameraDebugInfo:A}=F();e.loadingCallback={onProgress:n=>{console.log(n)},onComplete:n=>{k(l,e),z(),R(!1),console.log(n)}};const m=j(l),d=A(l);let g=null,s=null;function z(){e.setDenoiseColorFactor(1.165),e.setDenoisePositionFactor(.249)}function O(n){n.traverse(t=>{t.isMesh&&t.material&&t.material.isMeshStandardMaterial&&(t.material=new b().fromStandardMaterial(t.material),t.material.transmission=1,t.material.roughness=0)})}async function U(){const n=new w,t=await new Promise(p=>{n.load(G,p)});a.environment=t;const c=(await C(T)).scene;O(c),a.add(c),M(i,r,a),e.buildScene(a,i).then(()=>{u()})}function f(){if(e.domElement.parentElement){const n=e.domElement.parentElement.clientWidth,t=e.domElement.parentElement.clientHeight;e.setSize(n,t),i.aspect=n/t,i.updateProjectionMatrix()}}window.addEventListener("resize",f);f();function u(n){r.update(),m.begin(),e.render(a,i),m.end(),d&&(s=e.getTotalSamples(),g!=s&&(d.innerText=`Samples: ${s}`,g=s)),requestAnimationFrame(u)}U();

import{L as h,l as C,O as w,R as L,a as M,u as E,D as S}from"./stats.module.6802f85e.js";import{A as P,S as b,P as D,F as v,C as y}from"./vendor.f1de933b.js";import{e as F,g as I}from"./assets.d9fd3e26.js";import{m as T}from"./makeCommonGUI.95201cda.js";const G=[],j=F.Konzerthaus,z=I.DragonDraco,e=new h;e.bounces=5;e.renderWhenOffFocus=!0;e.toneMapping=P;e.envMapIntensity=2;e.enableDenoise=!0;e.enableTemporalDenoise=!1;document.body.appendChild(e.domElement);const o=new b;C(G,o);const a=new D(45,window.innerWidth/window.innerHeight,.001,1e3),l=new w(a,e.domElement);l.screenSpacePanning=!0;const i=document.querySelector("#container");function A(n){n?i.classList.contains("isLoading")||i.classList.add("isLoading"):i.classList.contains("isLoading")&&i.classList.remove("isLoading")}const c=!0,{initStats:R,initGUI:k,initCameraDebugInfo:x}=T();e.loadingCallback={onProgress:n=>{console.log(n)},onComplete:n=>{console.log(n),A(!1),O(),k(c,e)}};const m=R(c),d=x(c);let f=null,s=null;function O(){e.setDenoiseColorFactor(3),e.setDenoisePositionFactor(.3)}function U(n){n.traverse(t=>{t.isMesh&&t.material&&t.material.isMeshStandardMaterial&&(t.material=new S().fromStandardMaterial(t.material),t.material.transmission=1,t.material.roughness=.316,t.material.extinction=new y(15114316))})}async function W(){const n=new L().setDataType(v),t=await new Promise(u=>{n.load(j,u)});o.environment=t;const r=(await M(z)).scene;U(r),r.rotation.y=Math.PI/1.5,o.add(r),E(a,l,o),a.position.z-=5,e.buildScene(o,a).then(()=>{p()})}function g(){if(e.domElement.parentElement){const n=e.domElement.parentElement.clientWidth,t=e.domElement.parentElement.clientHeight;e.setSize(n,t),a.aspect=n/t,a.updateProjectionMatrix()}}window.addEventListener("resize",g);g();function p(n){l.update(),m.begin(),e.render(o,a),m.end(),d&&(s=e.getTotalSamples(),f!=s&&(d.innerText=`Samples: ${s}`,f=s)),requestAnimationFrame(p)}W();

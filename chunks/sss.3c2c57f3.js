import{L as h,l as L,O as S,R as w,c as C,u as M,D as E}from"./stats.module.6802f85e.js";import{A as P,S as b,P as v,F as D}from"./vendor.f1de933b.js";import{e as F,g as y}from"./assets.d9fd3e26.js";import{m as I}from"./makeCommonGUI.95201cda.js";const T=[],G=F.Dirlight,j=y.SSSDragon,e=new h;e.bounces=5;e.renderWhenOffFocus=!1;e.toneMapping=P;e.envMapIntensity=1;e.enableDenoise=!1;document.body.appendChild(e.domElement);const a=new b;L(T,a);const i=new v(45,window.innerWidth/window.innerHeight,.001,1e3),r=new S(i,e.domElement);r.screenSpacePanning=!0;const s=document.querySelector("#container");function R(n){n?s.classList.contains("isLoading")||s.classList.add("isLoading"):s.classList.contains("isLoading")&&s.classList.remove("isLoading")}const l=!0,{initStats:k,initGUI:A,initCameraDebugInfo:z}=I();e.loadingCallback={onProgress:n=>{console.log(n)},onComplete:n=>{A(l,e),O(),R(!1),console.log(n)}};const m=k(l),d=z(l);let f=null,o=null;function O(){e.setDenoiseColorFactor(1.165),e.setDenoisePositionFactor(.249)}function U(n){n.traverse(t=>{t.isMesh&&t.material&&t.material.isMeshStandardMaterial&&(t.material=new E().fromStandardMaterial(t.material),t.material.transmission=1,t.material.roughness=0)})}async function W(){const n=new w().setDataType(D),t=await new Promise(u=>{n.load(G,u)});a.environment=t;const c=(await C(j)).scene;U(c),a.add(c),M(i,r,a),e.buildScene(a,i).then(()=>{p()})}function g(){if(e.domElement.parentElement){const n=e.domElement.parentElement.clientWidth,t=e.domElement.parentElement.clientHeight;e.setSize(n,t),i.aspect=n/t,i.updateProjectionMatrix()}}window.addEventListener("resize",g);g();function p(n){r.update(),m.begin(),e.render(a,i),m.end(),d&&(o=e.getTotalSamples(),f!=o&&(d.innerText=`Samples: ${o}`,f=o)),requestAnimationFrame(p)}W();
